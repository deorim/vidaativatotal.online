
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel de Intera√ß√µes Autom√°ticas Facebook</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f4; }
    #login-screen, #dashboard { display: none; padding: 20px; }
    #login-screen.active, #dashboard.active { display: block; }
    .container { max-width: 800px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h1 { margin-top: 0; }
    input[type="text"], input[type="password"] { width: 100%; padding: 8px; margin-bottom: 12px; }
    button { padding: 10px 16px; margin: 4px; border: none; border-radius: 4px; cursor: pointer; }
    button.primary { background: #007bff; color: #fff; }
    button.danger { background: #dc3545; color: #fff; }
    button.secondary { background: #6c757d; color: #fff; }
    table { width: 100%; border-collapse: collapse; margin-top: 16px; }
    th, td { padding: 8px; border: 1px solid #ddd; text-align: center; }
    #log { height: 150px; overflow-y: auto; background: #272822; color: #f8f8f2; padding: 8px; border-radius: 4px; font-family: monospace; font-size: 12px; }
  </style>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
  <div id="login-screen" class="active container">
    <h1>Login</h1>
    <input type="password" id="password" placeholder="Senha para acesso">
    <button id="btn-login" class="primary">Entrar</button>
    <p id="login-error" style="color: red; display: none;">Senha incorreta.</p>
  </div>
  <div id="dashboard" class="container">
    <h1>Painel de Intera√ß√µes Autom√°ticas FB</h1>
    <h2>Perfis Ativos</h2>
    <ul id="profile-list"></ul>
    <h2>URLs de Publica√ß√£o</h2>
    <div id="urls-container"></div>
    <button id="btn-add-url" class="secondary">‚ûï Incluir mais URL</button>
    <table id="metrics-table">
      <thead><tr><th>URL</th><th>üëç</th><th>üí¨</th><th>üîÑ</th></tr></thead>
      <tbody></tbody>
    </table>
    <h2>Log</h2>
    <div id="log"></div>
  </div>

  <script>
    // CONFIG
    const PASSWORD = '33479811';
    const COMMENTS = [...Array(100)].map((_,i)=>{ /* prefill 100 messages */ });
    // Firebase config (substitua pelos seus dados)
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT.firebaseio.com",
      projectId: "YOUR_PROJECT",
      storageBucket: "YOUR_PROJECT.appspot.com",
      messagingSenderId: "...",
      appId: "..."
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let isRunning = false;
    let profileId = null;

    function log(msg) {
      const logEl = document.getElementById('log');
      const t = new Date().toLocaleTimeString();
      logEl.textContent += `[${t}] ${msg}\n`;
      logEl.scrollTop = logEl.scrollHeight;
    }
    function getRandomDelay(min,max){return Math.random()*(max-min)+min;}
    function getRandomComment(){return COMMENTS[Math.floor(Math.random()*COMMENTS.length)];}

    document.getElementById('btn-login').onclick = ()=>{
      if(document.getElementById('password').value===PASSWORD){
        document.getElementById('login-screen').classList.remove('active');
        document.getElementById('dashboard').classList.add('active');
        profileId = document.cookie.match(/c_user=(\d+)/)?.[1]||(('profile_'+Math.random()).slice(0,12));
        setupDashboard(); start();
      } else document.getElementById('login-error').style.display='block';
    };

    function setupDashboard(){
      // Profiles
      document.getElementById('profile-list').innerHTML = `<li>${profileId}</li>`;
      // URLs listener
      document.getElementById('btn-add-url').onclick = addUrlInput;
      // load URLs from DB
      db.ref('urls').on('value',snap=>{
        const urls = snap.val()||[]; renderUrls(urls);
      });
      // metrics listener
      db.ref('metrics').on('value',snap=> updateMetricsTable(snap.val()||{}));
    }
    function renderUrls(urls){
      const cont = document.getElementById('urls-container'); cont.innerHTML='';
      urls.forEach((u,i)=>{
        const inp = document.createElement('input'); inp.type='text'; inp.value=u; inp.style.width='80%';
        inp.onchange = ()=>{
          urls[i]=inp.value; db.ref('urls').set(urls);
        };
        cont.appendChild(inp);
      });
    }
    function addUrlInput(){
      db.ref('urls').once('value').then(snap=>{
        const arr = snap.val()||[]; arr.push(''); db.ref('urls').set(arr);
      });
    }
    function updateMetricsTable(metrics){
      const tbody = document.querySelector('#metrics-table tbody'); tbody.innerHTML='';
      Object.entries(metrics).forEach(([url,m])=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${url}</td><td>${m.likes||0}</td><td>${m.comments||0}</td><td>${m.shares||0}</td>`;
        tbody.appendChild(tr);
      });
    }

    async function start(){ isRunning=true; while(isRunning){
      const urlSnap = await db.ref('urls').once('value');
      const urls = urlSnap.val()||[];
      for(const url of urls){ if(!url) continue;
        await interact(url);
      }
    }}
    async function interact(url){
      log('Processando '+url);
      const iframe=document.createElement('iframe'); iframe.src=url; iframe.style.display='none'; document.body.appendChild(iframe);
      await new Promise(r=>iframe.onload=r);
      const d=iframe.contentDocument;
      // init metrics path
      const mRef = db.ref(`metrics/${url.replace(/\./g,'_')}`);
      const likeBtn=d.querySelector('[aria-label*="Curtir"]'); if(likeBtn){ likeBtn.click(); log('Curtido'); mRef.child('likes').transaction(v=>(v||0)+1); }
      await new Promise(r=>setTimeout(r,getRandomDelay(45000,120000)));
      const comBox=d.querySelector('[aria-label="Escreva um coment√°rio..."]'); if(comBox){ comBox.innerText=getRandomComment(); comBox.dispatchEvent(new Event('input',{bubbles:true})); d.querySelector('[aria-label="Enviar"]').click(); log('Comentado'); mRef.child('comments').transaction(v=>(v||0)+1); }
      await new Promise(r=>setTimeout(r,getRandomDelay(45000,120000)));
      const shareBtn=d.querySelector('[aria-label*="Compartilhar"]'); if(shareBtn){ shareBtn.click(); log('Compartilhado'); mRef.child('shares').transaction(v=>(v||0)+1); }
      await new Promise(r=>setTimeout(r,getRandomDelay(45000,120000)));
      // comments
      const comments=d.querySelectorAll('[aria-label="Coment√°rio"]');
      for(const c of comments){ if(c.querySelector('[aria-label*="Curtir"]')){ c.querySelector('[aria-label*="Curtir"]').click(); log('Curtida em coment√°rio'); await new Promise(r=>setTimeout(r,getRandomDelay(2000,5000))); }
        if(c.querySelector('[aria-label*="Responder"]')){
          c.querySelector('[aria-label*="Responder"]').click(); await new Promise(r=>setTimeout(r,getRandomDelay(1000,2000)));
          const rb=c.querySelector('[aria-label="Escreva uma resposta..."]'); if(rb){ rb.innerText=getRandomComment(); rb.dispatchEvent(new Event('input',{bubbles:true})); c.querySelector('[aria-label="Enviar"]').click(); log('Respondido'); mRef.child('comments').transaction(v=>(v||0)+1); await new Promise(r=>setTimeout(r,getRandomDelay(3000,6000))); }
        }
      }
      document.body.removeChild(iframe);
    }
  </script>
</body>
</html>
